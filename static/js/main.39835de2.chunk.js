(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{17:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(10),o=n.n(c),i=(n(17),n(8)),s=n.n(i),l=n(9),u=n(11),h=n(3),m=n(4),d=n(6),g=n(5),j=n(12),b=n.n(j),p="".concat("https://pixabay.com/api/?image_type=","photo&orientation=horizontal&key=").concat("21031732-6fee4eefe658f550324b0a29e","&per_page=12&q=");function f(e,t){return fetch("".concat(p).concat(e,"&page=").concat(t)).then((function(e){return e.json()})).then((function(e){return e.hits.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL}}))}))}var O=n(0);function v(e){var t=e.onSubmitDo;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("header",{className:"Searchbar",children:Object(O.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),t(e.target.elements[1].value),e.target.elements[1].value=""},children:[Object(O.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(O.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(O.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})})}function y(e){var t=e.id,n=e.url,a=e.clickOnImg;return Object(O.jsx)("img",{className:"galleryImg",id:t,src:n,alt:"img",onClick:a})}function x(e){var t=e.imgs,n=e.clickOnGall;return Object(O.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,a=e.webformatURL;return Object(O.jsx)("li",{children:Object(O.jsx)(y,{id:t,url:a,clickOnImg:n})},t)}))})}var k=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleClickOnBD=function(t){t.target===t.currentTarget&&e.props.onClose()},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(O.jsx)("div",{className:"Overlay",onClick:this.handleClickOnBD,children:Object(O.jsx)("div",{className:"Modal",children:Object(O.jsx)("img",{src:this.props.urlBigImg,alt:"oversize"})})})}}]),n}(a.Component);function w(e){var t=e.onClick;return Object(O.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})}var S=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={query:null,curPage:1,imgs:[],modalImgId:null,showM:!1,isLoading:!1},e.handleSubmit=function(t){return e.setState({query:t,curPage:1})},e.toggleModal=function(){return e.setState({showM:!e.state.showM})},e.handleMore=function(){return e.setState((function(e){return{curPage:e.curPage+1}}))},e.handleTakeID=function(t){e.setState({modalImgId:+t.target.id}),e.toggleModal()},e}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,r=a.query,c=a.curPage,o=a.imgs,this.setState({isLoading:!0}),n.query===r&&n.curPage===c){e.next=11;break}return e.t0=[],e.t1=Object(l.a)(o),e.t2=l.a,e.next=8,f(r,c);case 8:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),o=e.t0.concat.call(e.t0,e.t1,e.t4);case 11:this.setState({imgs:o,isLoading:!1}),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.state,a=this.handleTakeID,r=this.handleMore,c=this.toggleModal,o=n.imgs,i=n.isLoading,s=n.showM,l=n.modalImgId;return Object(O.jsxs)("div",{className:"App",children:[i&&Object(O.jsx)(b.a,{className:"Loader",type:"Watch"}),Object(O.jsx)(v,{onSubmitDo:function(e){return t.setState({query:e})}}),!i&&o.length>0&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(x,{imgs:o,clickOnGall:a}),Object(O.jsx)(w,{onClick:r})]}),s&&Object(O.jsx)(k,{urlBigImg:(e=l,o[o.map((function(e){return e.id})).indexOf(e)].largeImageURL),onClose:c})," "]})}}]),n}(a.Component);o.a.render(Object(O.jsxs)(r.a.StrictMode,{children:[Object(O.jsx)(S,{}),","]}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.39835de2.chunk.js.map